<!DOCTYPE html>
<html>
<head>
    <title>File name</title>
    <style>
    dl {
      display: flex;
      grid-template-columns: repeat(4, 1fr); /* Задаем четыре столбца равной ширины */
      gap: 8px; /* Отступ между элементами списка */
      margin: 20px; /* Отступ от краев */
    }

    dt {
      font-weight: bold;
      margin-bottom: 4px; /* Уменьшаем отступ снизу у термина */
    }

    dd {
      margin: 0; /* Убираем отступы у описаний */
      margin-top: 0; /* Убираем отступ сверху у описаний */
      margin-left: 0; /* Убираем отступ слева у описаний */
    }
        /* Стиль для превью картинки */
        1
        }

        .expanded-image {
            max-width: 85%; /* Полноэкранное изображение */
            max-height: 85%;
        }

        /* Стиль для картинки map_img */
        .map {
            position: fixed;
            bottom: 0;
            left: 0;
            max-width: 25%;
            min-width: 460px;
            cursor: pointer;
        }
        .preview {
    display: flex;
    overflow-x: auto;
    max-width: 450px; /* Максимальная ширина превью контейнера */
    margin: 2 left; /* Центрирование контейнера на странице */
    box-sizing: border-box; /* Учитывать padding и border внутри flex-basis */
    padding: 5px; /* Отступы между фотографиями */
    border: 2px solid #ccc; /* Толщина и цвет рамки */
  }
    .preview::-webkit-scrollbar {
  width: 10px; /* Ширина полосы прокрутки */
}

.preview::-webkit-scrollbar-track {
  background-color: #f1f1f1; /* Цвет фона трека */
}

.preview::-webkit-scrollbar-thumb {
  background-color: #888; /* Цвет полосы прокрутки */
  border-radius: 5px; /* Закругление углов полосы прокрутки */
}
    </style>
</head>
<body>
<h1>Title</h1>
<h2>Address</h2>
<div class="preview">
    {% for image_path in image_path_set %}
    <img class="expandable-image" src="{{ image_path }}">
    {% endfor %}
</div>
<h3>{{ description }}</h3>
{% for pair in mapping_set %}
<dl>
    <dt>{{ pair[0][0] }}</dt>
    <dd>{{ pair[0][1] }}</dd>
    {% if pair[1] is defined %}
    <dt>{{ pair[1][0] }}</dt>
    <dd>{{ pair[1][1] }}</dd>
    {% endif %}
</dl>
{% endfor %}
<img class="map" src="{{ map_img }}">
<script>
        let currentImageIndex = -1;
        let expandedImageContainer = null;

        function expandImage(image, currentIndex) {
            if (expandedImageContainer) {
                expandedImageContainer.remove();
            }

            expandedImageContainer = document.createElement('div');
            expandedImageContainer.classList.add('expanded-image-container');

            const slideshowButtons = `
                <div class="slideshow-buttons">
                    <div class="slideshow-button" onclick="showPrevImage()">&lt;</div>
                    <div class="slideshow-button" onclick="showNextImage()">&gt;</div>
                </div>
            `;

            expandedImageContainer.innerHTML = `
                ${slideshowButtons}
                <img class="expanded-image" src="${image.src}" alt="${image.alt}">
            `;

            expandedImageContainer.addEventListener('click', () => {
                expandedImageContainer.remove();
            });

            document.body.appendChild(expandedImageContainer);
            currentImageIndex = currentIndex;
        }

        function showNextImage() {
            const previewImages = document.querySelectorAll('.expandable-image');
            currentImageIndex = (currentImageIndex + 1) % previewImages.length;
            const image = previewImages[currentImageIndex];
            expandImage(image, currentImageIndex);
        }

        function showPrevImage() {
            const previewImages = document.querySelectorAll('.expandable-image');
            currentImageIndex = (currentImageIndex - 1 + previewImages.length) % previewImages.length;
            const image = previewImages[currentImageIndex];
            expandImage(image, currentImageIndex);
        }

        // JavaScript для увеличения превьюшек при клике
        const previewImages = document.querySelectorAll('.expandable-image');
        previewImages.forEach((previewImage, index) => {
            previewImage.addEventListener('click', () => {
                expandImage(previewImage, index);
            });
        });

        // JavaScript для увеличения картинки map_img при клике
        const mapImage = document.querySelector('.map');
        mapImage.addEventListener('click', () => {
            expandImage(mapImage, -1); // -1 для обозначения картинки "map_img"
        });

        // JavaScript для обработки клавиш "вправо" и "влево" на компьютере
        document.addEventListener('keydown', handleKeyPress, false);

        function handleKeyPress(event) {
            if (expandedImageContainer) {
                if (event.key === 'ArrowRight') {
                    showNextImage();
                } else if (event.key === 'ArrowLeft') {
                    showPrevImage();
                }
            }
        }

        // JavaScript для обработки свайпов на телефоне
        let xDown = null;

        document.addEventListener('touchstart', handleTouchStart, false);
        document.addEventListener('touchmove', handleTouchMove, false);

        function handleTouchStart(event) {
            xDown = event.touches[0].clientX;
        }

        function handleTouchMove(event) {
            if (!xDown) {
                return;
            }

            const xUp = event.touches[0].clientX;
            const xDiff = xDown - xUp;

            if (xDiff > 0) {
                showNextImage();
            } else {
                showPrevImage();
            }

            xDown = null;
        }
</script>
</body>
</html>